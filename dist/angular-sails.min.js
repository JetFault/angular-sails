!function(n,t){"use strict";n.module("ngSails",["ng"]),n.module("ngSails").provider("$sails",function(){var e=this,o=["get","post","put","delete"],i=["on","once"];this.url=void 0,this.socketOptions=void 0,this.interceptors=[],this.responseHandler=void 0,this._token=void 0,this.$get=["$q","$timeout","$injector",function(r,s,u){var c=t.connect(e.url,e.socketOptions),l=function(){var n=r.defer(),t=n.promise;return t.success=function(n){return t.then(n),t},t.error=function(n){return t.then(null,n),t},n},a=this.responseHandler?u.invoke(this.responseHandler):function(t,e,o){o.error=e.error,o&&n.isObject(o)&&o.statusCode&&!isNaN(o.statusCode)&&2!==Math.floor(o.statusCode/100)?t.reject(o):t.resolve(e)},f=function(n,t){s(function(){n(t)})},d=function(t){c["legacy_"+t]=c[t],c[t]=function(o,i,r){var s=l();return void 0===r&&n.isFunction(i)&&(r=i,i=null),s.promise.then(r),-1!==["put","post","patch","delete"].indexOf(t)&&(i=i||{},i._token||(i._token=e._token)),c["legacy_"+t](o,i,function(n,t){a(s,n,t)}),s.promise}},h=function(t){c["legacy_"+t]=c[t],c[t]=function(e,o){null!==o&&n.isFunction(o)&&c["legacy_"+t](e,function(n){f(o,n)})}};return n.forEach(o,d),n.forEach(i,h),c}]})}(angular,io);