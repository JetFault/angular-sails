!function(n,e){"use strict";n.module("ngSails",["ng"]),n.module("ngSails").provider("$sails",function(){var t=this,o=["get","post","put","delete"],r=["on","once"];this.url=void 0,this.interceptors=[],this.responseHandler=void 0,this.$get=["$q","$timeout","$injector",function(i,s,u){var c=e.connect(t.url),l=function(){var n=i.defer(),e=n.promise;return e.success=function(n){return e.then(n),e},e.error=function(n){return e.then(null,n),e},n},a=this.responseHandler?u.invoke(this.responseHandler):function(e,t,o){o.error=t.error,o&&n.isObject(o)&&o.statusCode&&!isNaN(o.statusCode)&&2!==Math.floor(o.statusCode/100)?e.reject(o):e.resolve(t)},f=function(n,e){s(function(){n(e)})},d=function(e){c["legacy_"+e]=c[e],c[e]=function(t,o,r){var i=l();return void 0===r&&n.isFunction(o)&&(r=o,o=null),i.promise.then(r),c["legacy_"+e](t,o,function(n,e){a(i,n,e)}),i.promise}},h=function(e){c["legacy_"+e]=c[e],c[e]=function(t,o){null!==o&&n.isFunction(o)&&c["legacy_"+e](t,function(n){f(o,n)})}};return n.forEach(o,d),n.forEach(r,h),c}]})}(angular,io);