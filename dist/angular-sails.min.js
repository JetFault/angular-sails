!function(n,t){"use strict";n.module("ngSails",["ng"]),n.module("ngSails").provider("$sails",function(){var e=this,r=["get","post","put","delete"],o=["on","once"];this.url=void 0,this.interceptors=[],this.responseHandler=void 0,this._csrf=void 0,this.$get=["$q","$timeout","$injector",function(i,s,c){var u=t.connect(e.url),l=function(){var n=i.defer(),t=n.promise;return t.success=function(n){return t.then(n),t},t.error=function(n){return t.then(null,n),t},n},a=this.responseHandler?c.invoke(this.responseHandler):function(t,e,r){r.error=e.error,r&&n.isObject(r)&&r.statusCode&&!isNaN(r.statusCode)&&2!==Math.floor(r.statusCode/100)?t.reject(r):t.resolve(e)},f=function(n,t){s(function(){n(t)})},d=function(t){u["legacy_"+t]=u[t],u[t]=function(e,r,o){var i=l();return void 0===o&&n.isFunction(r)&&(o=r,r=null),i.promise.then(o),r._csrf||(r._csrf=this._csrf),u["legacy_"+t](e,r,function(n,t){a(i,n,t)}),i.promise}},h=function(t){u["legacy_"+t]=u[t],u[t]=function(e,r){null!==r&&n.isFunction(r)&&u["legacy_"+t](e,function(n){f(r,n)})}};return n.forEach(r,d),n.forEach(o,h),u}]})}(angular,io);